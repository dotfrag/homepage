---
import BaseHead from "@components/BaseHead.astro";
import Footer from "@components/Footer.astro";
import Header from "@components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "src/consts";

import "@fontsource-variable/ibm-plex-sans";
import "@fontsource-variable/jetbrains-mono";

interface Props {
	title?: string;
	description?: string;
	pagefindBody?: boolean;
}

const { title, description, pagefindBody = false } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead
			title={title ? `${title} | ${SITE_TITLE}` : SITE_TITLE}
			description={description || SITE_DESCRIPTION}
		/>
	</head>

	<body
		class="bg-base text-text container mx-auto grid min-h-dvh max-w-4xl grid-rows-[auto_1fr_auto] gap-8 px-4"
	>
		<Header />
		<main
			class="min-w-0"
			data-pagefind-body={pagefindBody === true ? "" : undefined}
		>
			<slot />
		</main>
		<Footer />
	</body>
</html>

<script>
	const sources = document.querySelectorAll<HTMLAnchorElement>(
		"#sources + ul > li > a",
	);
	for (const source of sources) {
		source.target = "_blank";
	}
</script>
